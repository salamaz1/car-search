<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</title>

<style>
body{
  font-family:Segoe UI,Tahoma;
  margin:0;
  padding:15px;
  direction:rtl;
  background:#f2f4f8
}
h2{
  text-align:center;
  margin-bottom:15px
}
#search{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-bottom:15px;
  font-size:16px
}
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:15px
}
.card{
  background:#fff;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
  cursor:pointer;
  overflow:hidden
}
.card-header{
  padding:15px;
  background:#4f46e5;
  color:#fff
}
.card-header h3{
  margin:0;
  font-size:18px
}
.card-header .vin{
  font-size:13px;
  opacity:.9;
  margin-top:5px
}
.card-cost{
  padding:12px;
  font-weight:bold;
  color:#333;
  background:#eef2ff
}
.details{
  display:none;
  padding:12px;
  border-top:1px solid #eee
}
.card.open .details{
  display:block
}
.detail-row{
  display:flex;
  justify-content:space-between;
  padding:5px 0;
  border-bottom:1px dashed #ddd;
  font-size:14px
}
.detail-row:last-child{
  border-bottom:none
}
.label{
  color:#555;
  font-weight:600
}
.value{
  color:#111;
  text-align:left
}
.loading{
  text-align:center;
  color:#666;
  margin-top:40px
}
</style>
</head>

<body>

<h2>ğŸ” Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h2>

<input id="search" placeholder="Ø¨Ø­Ø« Ø¹Ø§Ù… (Ù†ÙˆØ¹ØŒ Ù…ÙˆØ¯ÙŠÙ„ØŒ Ø±Ù‚Ù… Ù‡ÙŠÙƒÙ„ØŒ ØªÙƒÙ„ÙØ©...)">

<div id="cards" class="cards">
  <div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
</div>

<script>
const CSV_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vR2sKJaXG_woDQOQge29zkhGyyWil3njTr8dmL9CqXdqV-e3Bi9JfTfqcLpdGMVPA/pub?output=csv";

let allData = [];
const cardsDiv = document.getElementById("cards");
const searchInput = document.getElementById("search");

fetch(CSV_URL)
.then(res => res.text())
.then(csv => {
  const rows = csv.split("\n").map(r => r.split(","));
  const headers = rows.shift();

  allData = rows.map(r => {
    let obj = {};
    headers.forEach((h,i)=> obj[h.trim()] = r[i] || "");
    return obj;
  });

  render(allData);
});

function render(data){
  cardsDiv.innerHTML="";
  if(data.length===0){
    cardsDiv.innerHTML="<div class='loading'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>";
    return;
  }

  data.forEach(car=>{
    const card=document.createElement("div");
    card.className="card";

    card.innerHTML=`
      <div class="card-header">
        <h3>${car["Ø§Ù„Ù†ÙˆØ¹"] || ""} - ${car["Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„"] || ""}</h3>
        <div class="vin">Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠÙƒÙ„: ${car["Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠÙƒÙ„"] || "-"}</div>
      </div>

      <div class="card-cost">
        Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${car["Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©"] || "-"} Ø¯.Ù„
      </div>

      <div class="details">
        ${Object.keys(car).map(k=>`
          <div class="detail-row">
            <span class="label">${k}</span>
            <span class="value">${car[k]}</span>
          </div>
        `).join("")}
      </div>
    `;

    card.onclick=()=>card.classList.toggle("open");
    cardsDiv.appendChild(card);
  });
}

searchInput.onkeyup=()=>{
  const v=searchInput.value.toLowerCase();
  render(allData.filter(c=>
    Object.values(c).join(" ").toLowerCase().includes(v)
  ));
};
</script>

</body>
</html>
